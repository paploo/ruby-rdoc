<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>&lt;&lt; (CSV)</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <link rel="stylesheet" href="../.././rdoc-style.css" type="text/css" media="screen" />
</head>
<body class="standalone-code">
  <pre>      <span class="ruby-comment cmt"># File lib/csv.rb, line 1683</span>
1683:   <span class="ruby-keyword kw">def</span> <span class="ruby-operator">&lt;&lt;</span>(<span class="ruby-identifier">row</span>)
1684:     <span class="ruby-comment cmt"># make sure headers have been assigned</span>
1685:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">header_row?</span> <span class="ruby-keyword kw">and</span> [<span class="ruby-constant">Array</span>, <span class="ruby-constant">String</span>].<span class="ruby-identifier">include?</span> <span class="ruby-ivar">@use_headers</span>.<span class="ruby-identifier">class</span>
1686:       <span class="ruby-identifier">parse_headers</span>  <span class="ruby-comment cmt"># won't read data for Array or String</span>
1687:       <span class="ruby-keyword kw">self</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-ivar">@headers</span> <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@write_headers</span>
1688:     <span class="ruby-keyword kw">end</span>
1689:     
1690:     <span class="ruby-comment cmt"># handle CSV::Row objects and Hashes</span>
1691:     <span class="ruby-identifier">row</span> = <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">row</span>
1692:           <span class="ruby-keyword kw">when</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span><span class="ruby-operator">::</span><span class="ruby-constant">Row</span> <span class="ruby-keyword kw">then</span> <span class="ruby-identifier">row</span>.<span class="ruby-identifier">fields</span>
1693:           <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Hash</span>            <span class="ruby-keyword kw">then</span> <span class="ruby-ivar">@headers</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">header</span><span class="ruby-operator">|</span> <span class="ruby-identifier">row</span>[<span class="ruby-identifier">header</span>] }
1694:           <span class="ruby-keyword kw">else</span>                      <span class="ruby-identifier">row</span>
1695:           <span class="ruby-keyword kw">end</span>
1696: 
1697:     <span class="ruby-ivar">@headers</span> =  <span class="ruby-identifier">row</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">header_row?</span>
1698:     <span class="ruby-ivar">@lineno</span>  <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
1699: 
1700:     <span class="ruby-ivar">@io</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">row</span>.<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-ivar">@quote</span>).<span class="ruby-identifier">join</span>(<span class="ruby-ivar">@col_sep</span>) <span class="ruby-operator">+</span> <span class="ruby-ivar">@row_sep</span>  <span class="ruby-comment cmt"># quote and separate</span>
1701:     
1702:     <span class="ruby-keyword kw">self</span>  <span class="ruby-comment cmt"># for chaining</span>
1703:   <span class="ruby-keyword kw">end</span></pre>
</body>
</html>
