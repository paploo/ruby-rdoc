<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>last_match (Regexp)</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <link rel="stylesheet" href="../.././rdoc-style.css" type="text/css" media="screen" />
</head>
<body class="standalone-code">
  <pre>/*
 *  call-seq:
 *     Regexp.last_match           =&gt; matchdata
 *     Regexp.last_match(n)        =&gt; str
 *
 *  The first form returns the &lt;code&gt;MatchData&lt;/code&gt; object generated by the
 *  last successful pattern match. Equivalent to reading the global variable
 *  &lt;code&gt;$~&lt;/code&gt;. The second form returns the &lt;i&gt;n&lt;/i&gt;th field in this
 *  &lt;code&gt;MatchData&lt;/code&gt; object.
 *  &lt;em&gt;n&lt;/em&gt; can be a string or symbol to reference a named capture.
 *
 *     /c(.)t/ =~ 'cat'        #=&gt; 0
 *     Regexp.last_match       #=&gt; #&lt;MatchData &quot;cat&quot; 1:&quot;a&quot;&gt;
 *     Regexp.last_match(0)    #=&gt; &quot;cat&quot;
 *     Regexp.last_match(1)    #=&gt; &quot;a&quot;
 *     Regexp.last_match(2)    #=&gt; nil
 *
 *     /(?&lt;lhs&gt;\w+)\s*=\s*(?&lt;rhs&gt;\w+)/ =~ &quot;var = val&quot;
 *     Regexp.last_match       #=&gt; #&lt;MatchData &quot;var = val&quot; lhs:&quot;var&quot; rhs:&quot;val&quot;&gt;
 *     Regexp.last_match(:lhs) #=&gt; &quot;var&quot;
 *     Regexp.last_match(:rhs) #=&gt; &quot;val&quot;
 */

static VALUE
rb_reg_s_last_match(int argc, VALUE *argv)
{
    VALUE nth;

    if (argc &gt; 0 &amp;&amp; rb_scan_args(argc, argv, &quot;01&quot;, &amp;nth) == 1) {
        VALUE match = rb_backref_get();
        int n;
        if (NIL_P(match)) return Qnil;
        n = match_backref_number(match, nth);
        return rb_reg_nth_match(n, match);
    }
    return match_getter();
}</pre>
</body>
</html>
