<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>call (Method)</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <link rel="stylesheet" href="../.././rdoc-style.css" type="text/css" media="screen" />
</head>
<body class="standalone-code">
  <pre>/*
 *  call-seq:
 *     meth.call(args, ...)    =&gt; obj
 *     meth[args, ...]         =&gt; obj
 *  
 *  Invokes the &lt;i&gt;meth&lt;/i&gt; with the specified arguments, returning the
 *  method's return value.
 *     
 *     m = 12.method(&quot;+&quot;)
 *     m.call(3)    #=&gt; 15
 *     m.call(20)   #=&gt; 32
 */

VALUE
rb_method_call(int argc, VALUE *argv, VALUE method)
{
    VALUE result = Qnil;        /* OK */
    struct METHOD *data;
    int state;
    volatile int safe = -1;

    Data_Get_Struct(method, struct METHOD, data);
    if (data-&gt;recv == Qundef) {
        rb_raise(rb_eTypeError, &quot;can't call unbound method; bind first&quot;);
    }
    PUSH_TAG();
    if (OBJ_TAINTED(method)) {
        safe = rb_safe_level();
        if (rb_safe_level() &lt; 4) {
            rb_set_safe_level_force(4);
        }
    }
    if ((state = EXEC_TAG()) == 0) {
        rb_thread_t *th = GET_THREAD();
        VALUE rb_vm_call(rb_thread_t * th, VALUE klass, VALUE recv, VALUE id, ID oid,
                         int argc, const VALUE *argv, const NODE *body, int nosuper);

        PASS_PASSED_BLOCK_TH(th);
        result = rb_vm_call(th, data-&gt;oclass, data-&gt;recv, data-&gt;id, data-&gt;oid,
                            argc, argv, data-&gt;body, 0);
    }
    POP_TAG();
    if (safe &gt;= 0)
        rb_set_safe_level_force(safe);
    if (state)
        JUMP_TAG(state);
    return result;
}</pre>
</body>
</html>
