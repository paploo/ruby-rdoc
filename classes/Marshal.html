<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Module: Marshal [RDoc Documentation]</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href=".././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;

    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }

  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }<\/style>" )

  // ]]>
  </script>

</head>
<body>


    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td><strong>Module</strong></td>
          <td class="class-name-in-header">Marshal</td>
        </tr>
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>


                <a href="../files/marshal_c.html">

                marshal.c

                </a>


        <br />

            </td>
        </tr>


        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">

  <div id="contextContent">

    <div id="description">
      <p>
The marshaling library converts collections of Ruby objects into a byte
stream, allowing them to be stored outside the currently active script.
This data may subsequently be read and the original objects reconstituted.
Marshaled data has major and minor version numbers stored along with the
object information. In normal use, marshaling can only load data written
with the same major version number and an equal or lower minor version
number. If Ruby&#8217;s ``verbose&#8217;&#8217; flag is set (normally using
-d, -v, -w, or &#8212;verbose) the major and minor numbers must match
exactly. <a href="Marshal.html">Marshal</a> versioning is independent of
Ruby&#8217;s version numbers. You can extract the version by reading the
first two bytes of marshaled data.
</p>
<pre>
    str = Marshal.dump(&quot;thing&quot;)
    RUBY_VERSION   #=&gt; &quot;1.9.0&quot;
    str[0].ord     #=&gt; 4
    str[1].ord     #=&gt; 8
</pre>
<p>
Some objects cannot be dumped: if the objects to be dumped include
bindings, procedure or method objects, instances of class <a
href="IO.html">IO</a>, or singleton objects, a <a
href="TypeError.html">TypeError</a> will be raised. If your class has
special serialization needs (for example, if you want to serialize in some
specific format), or if it contains objects that would otherwise not be
serializable, you can implement your own serialization strategy by defining
two methods, _dump and _load: The instance method _dump should return a <a
href="String.html">String</a> object containing all the information
necessary to reconstitute objects of this class and all referenced objects
up to a maximum depth given as an integer parameter (a value of -1 implies
that you should disable depth checking). The class method _load should take
a <a href="String.html">String</a> and return an object of this class.
</p>

    </div>

   </div>


    <div id="method-list">
      <h3 class="section-bar">Methods</h3>

      <div class="name-list">

        <a href="#M003119">dump</a>&nbsp;&nbsp;

        <a href="#M003120">load</a>&nbsp;&nbsp;

        <a href="#M003121">restore</a>&nbsp;&nbsp;

      </div>
    </div>

  </div>

    <!-- if includes -->

    <div id="section">

    <div id="constants-list">
      <h3 class="section-bar">Constants</h3>

      <div class="name-list">
        <table summary="Constants">

        <tr class="top-aligned-row context-row">
          <td class="context-item-name">MAJOR_VERSION</td>
          <td>=</td>
          <td class="context-item-value">INT2FIX(MARSHAL_MAJOR)</td>

        </tr>

        <tr class="top-aligned-row context-row">
          <td class="context-item-name">MINOR_VERSION</td>
          <td>=</td>
          <td class="context-item-value">INT2FIX(MARSHAL_MINOR)</td>

        </tr>

        </table>
      </div>
    </div>




    <!-- if method_list -->

    <div id="methods">

      <h3 class="section-bar">Public Class methods</h3>


      <div id="method-M003119" class="method-detail">
        <a name="M003119"></a>

        <div class="method-heading">

          <a href="Marshal.src/M003119.html" target="Code" class="method-signature"
            onclick="popupCode('Marshal.src/M003119.html');return false;">

          <span class="method-name">dump( obj [, anIO] , limit=--1 ) => anIO<br />
</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Serializes obj and all descendent objects. If an<a href="IO.html">IO</a> is
specified, the serialized data will be written to it, otherwise the data
will be returned as a <a href="String.html">String</a>. If limit is
specified, the traversal of subobjects will be limited to that depth. If
limit is negative, no checking of depth will be performed.
</p>
<pre>
    class Klass
      def initialize(str)
        @str = str
      end
      def sayHello
        @str
      end
    end
</pre>
<p>
(produces no output)
</p>
<pre>
    o = Klass.new(&quot;hello\n&quot;)
    data = Marshal.dump(o)
    obj = Marshal.load(data)
    obj.sayHello   #=&gt; &quot;hello\n&quot;
</pre>

        </div>
      </div>


      <div id="method-M003120" class="method-detail">
        <a name="M003120"></a>

        <div class="method-heading">

          <a href="Marshal.src/M003120.html" target="Code" class="method-signature"
            onclick="popupCode('Marshal.src/M003120.html');return false;">

          <span class="method-name">load( source [, proc] ) => obj<br />
restore( source [, proc] ) => obj<br />
</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Returns the result of converting the serialized data in source into a Ruby
object (possibly with associated subordinate objects). source may be either
an instance of <a href="IO.html">IO</a> or an object that responds to
to_str. If proc is specified, it will be passed each object as it is
deserialized.
</p>

        </div>
      </div>


      <div id="method-M003121" class="method-detail">
        <a name="M003121"></a>

        <div class="method-heading">

          <a href="Marshal.src/M003121.html" target="Code" class="method-signature"
            onclick="popupCode('Marshal.src/M003121.html');return false;">

          <span class="method-name">load( source [, proc] ) => obj<br />
restore( source [, proc] ) => obj<br />
</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Returns the result of converting the serialized data in source into a Ruby
object (possibly with associated subordinate objects). source may be either
an instance of <a href="IO.html">IO</a> or an object that responds to
to_str. If proc is specified, it will be passed each object as it is
deserialized.
</p>

        </div>
      </div>



    </div>




  </div>

<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>
