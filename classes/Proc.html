<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Class: Proc [RDoc Documentation]</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href=".././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;

    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }

  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }<\/style>" )

  // ]]>
  </script>

</head>
<body>


    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td><strong>Class</strong></td>
          <td class="class-name-in-header">Proc</td>
        </tr>
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>


                <a href="../files/proc_c.html">

                proc.c

                </a>


        <br />

            </td>
        </tr>


        <tr class="top-aligned-row">
            <td><strong>Parent:</strong></td>
            <td>

                <a href="Object.html">

                Object

               </a>

            </td>
        </tr>

        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">

  <div id="contextContent">

    <div id="description">
      <p>
<tt>Proc</tt> objects are blocks of code that have been bound to a set of
local variables. Once bound, the code may be called in different contexts
and still access those variables.
</p>
<pre>
   def gen_times(factor)
     return Proc.new {|n| n*factor }
   end

   times3 = gen_times(3)
   times5 = gen_times(5)

   times3.call(12)               #=&gt; 36
   times5.call(5)                #=&gt; 25
   times3.call(times5.call(4))   #=&gt; 60
</pre>

    </div>

   </div>


    <div id="method-list">
      <h3 class="section-bar">Methods</h3>

      <div class="name-list">

        <a href="#M001052">==</a>&nbsp;&nbsp;

        <a href="#M001048">===</a>&nbsp;&nbsp;

        <a href="#M001047">[]</a>&nbsp;&nbsp;

        <a href="#M001051">arity</a>&nbsp;&nbsp;

        <a href="#M001057">binding</a>&nbsp;&nbsp;

        <a href="#M001046">call</a>&nbsp;&nbsp;

        <a href="#M001058">curry</a>&nbsp;&nbsp;

        <a href="#M001053">eql?</a>&nbsp;&nbsp;

        <a href="#M001054">hash</a>&nbsp;&nbsp;

        <a href="#M001056">lambda?</a>&nbsp;&nbsp;

        <a href="#M001045">new</a>&nbsp;&nbsp;

        <a href="#M001059">source_location</a>&nbsp;&nbsp;

        <a href="#M001050">to_proc</a>&nbsp;&nbsp;

        <a href="#M001055">to_s</a>&nbsp;&nbsp;

        <a href="#M001049">yield</a>&nbsp;&nbsp;

      </div>
    </div>

  </div>

    <!-- if includes -->

    <div id="section">




    <!-- if method_list -->

    <div id="methods">

      <h3 class="section-bar">Public Class methods</h3>


      <div id="method-M001045" class="method-detail">
        <a name="M001045"></a>

        <div class="method-heading">

          <a href="Proc.src/M001045.html" target="Code" class="method-signature"
            onclick="popupCode('Proc.src/M001045.html');return false;">

          <span class="method-name">Proc.new {|...| block } => a_proc<br />
Proc.new                => a_proc<br />
</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Creates a new <tt>Proc</tt> object, bound to the current context.
<tt>Proc::new</tt> may be called without a block only within a method with
an attached block, in which case that block is converted to the
<tt>Proc</tt> object.
</p>
<pre>
   def proc_from
     Proc.new
   end
   proc = proc_from { &quot;hello&quot; }
   proc.call   #=&gt; &quot;hello&quot;
</pre>

        </div>
      </div>


      <h3 class="section-bar">Public Instance methods</h3>


      <div id="method-M001052" class="method-detail">
        <a name="M001052"></a>

        <div class="method-heading">

          <a href="Proc.src/M001052.html" target="Code" class="method-signature"
            onclick="popupCode('Proc.src/M001052.html');return false;">

          <span class="method-name">prc == other_proc   =>  true or false<br />
</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Return <tt>true</tt> if <em>prc</em> is the same object as
<em>other_proc</em>, or if they are both procs with the same body.
</p>

        </div>
      </div>


      <div id="method-M001048" class="method-detail">
        <a name="M001048"></a>

        <div class="method-heading">

          <a href="Proc.src/M001048.html" target="Code" class="method-signature"
            onclick="popupCode('Proc.src/M001048.html');return false;">

          <span class="method-name">prc === obj   => obj<br />
</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Invokes the block, with <em>obj</em> as the block&#8217;s parameter. It is
to allow a proc object to be a target of when clause in the case statement.
</p>

        </div>
      </div>


      <div id="method-M001047" class="method-detail">
        <a name="M001047"></a>

        <div class="method-heading">

          <a href="Proc.src/M001047.html" target="Code" class="method-signature"
            onclick="popupCode('Proc.src/M001047.html');return false;">

          <span class="method-name">prc === obj   => obj<br />
</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Invokes the block, with <em>obj</em> as the block&#8217;s parameter. It is
to allow a proc object to be a target of when clause in the case statement.
</p>

        </div>
      </div>


      <div id="method-M001051" class="method-detail">
        <a name="M001051"></a>

        <div class="method-heading">

          <a href="Proc.src/M001051.html" target="Code" class="method-signature"
            onclick="popupCode('Proc.src/M001051.html');return false;">

          <span class="method-name">prc.arity &rarr; fixnum<br />
</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Returns the number of arguments that would not be ignored. If the block is
declared to take no arguments, returns 0. If the block is known to take
exactly n arguments, returns n. If the block has optional arguments, return
-n-1, where n is the number of mandatory arguments. A <tt>proc</tt> with no
argument declarations is the same a block declaring <tt>||</tt> as its
arguments.
</p>
<pre>
   Proc.new {}.arity          #=&gt;  0
   Proc.new {||}.arity        #=&gt;  0
   Proc.new {|a|}.arity       #=&gt;  1
   Proc.new {|a,b|}.arity     #=&gt;  2
   Proc.new {|a,b,c|}.arity   #=&gt;  3
   Proc.new {|*a|}.arity      #=&gt; -1
   Proc.new {|a,*b|}.arity    #=&gt; -2
   Proc.new {|a,*b, c|}.arity    #=&gt; -3
</pre>

        </div>
      </div>


      <div id="method-M001057" class="method-detail">
        <a name="M001057"></a>

        <div class="method-heading">

          <a href="Proc.src/M001057.html" target="Code" class="method-signature"
            onclick="popupCode('Proc.src/M001057.html');return false;">

          <span class="method-name">prc.binding    => binding<br />
</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Returns the binding associated with <em>prc</em>. Note that <tt><a
href="Kernel.html#M002770">Kernel#eval</a></tt> accepts either a
<tt>Proc</tt> or a <tt>Binding</tt> object as its second parameter.
</p>
<pre>
   def fred(param)
     proc {}
   end

   b = fred(99)
   eval(&quot;param&quot;, b.binding)   #=&gt; 99
</pre>

        </div>
      </div>


      <div id="method-M001046" class="method-detail">
        <a name="M001046"></a>

        <div class="method-heading">

          <a href="Proc.src/M001046.html" target="Code" class="method-signature"
            onclick="popupCode('Proc.src/M001046.html');return false;">

          <span class="method-name">prc === obj   => obj<br />
</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Invokes the block, with <em>obj</em> as the block&#8217;s parameter. It is
to allow a proc object to be a target of when clause in the case statement.
</p>

        </div>
      </div>


      <div id="method-M001058" class="method-detail">
        <a name="M001058"></a>

        <div class="method-heading">

          <a href="Proc.src/M001058.html" target="Code" class="method-signature"
            onclick="popupCode('Proc.src/M001058.html');return false;">

          <span class="method-name">prc.curry         => a_proc<br />
prc.curry(arity)  => a_proc<br />
</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Returns a curried proc. If the optional <em>arity</em> argument is given,
it determines the number of arguments. A curried proc receives some
arguments. If a sufficient number of arguments are supplied, it passes the
supplied arguments to the original proc and returns the result. Otherwise,
returns another curried proc that takes the rest of arguments.
</p>
<pre>
   b = proc {|x, y, z| (x||0) + (y||0) + (z||0) }
   p b.curry[1][2][3]           #=&gt; 6
   p b.curry[1, 2][3, 4]        #=&gt; 6
   p b.curry(5)[1][2][3][4][5]  #=&gt; 6
   p b.curry(5)[1, 2][3, 4][5]  #=&gt; 6
   p b.curry(1)[1]              #=&gt; 1

   b = proc {|x, y, z, *w| (x||0) + (y||0) + (z||0) + w.inject(0, &amp;:+) }
   p b.curry[1][2][3]           #=&gt; 6
   p b.curry[1, 2][3, 4]        #=&gt; 10
   p b.curry(5)[1][2][3][4][5]  #=&gt; 15
   p b.curry(5)[1, 2][3, 4][5]  #=&gt; 15
   p b.curry(1)[1]              #=&gt; 1

   b = lambda {|x, y, z| (x||0) + (y||0) + (z||0) }
   p b.curry[1][2][3]           #=&gt; 6
   p b.curry[1, 2][3, 4]        #=&gt; wrong number of arguments (4 or 3)
   p b.curry(5)                 #=&gt; wrong number of arguments (5 or 3)
   p b.curry(1)                 #=&gt; wrong number of arguments (1 or 3)

   b = lambda {|x, y, z, *w| (x||0) + (y||0) + (z||0) + w.inject(0, &amp;:+) }
   p b.curry[1][2][3]           #=&gt; 6
   p b.curry[1, 2][3, 4]        #=&gt; 10
   p b.curry(5)[1][2][3][4][5]  #=&gt; 15
   p b.curry(5)[1, 2][3, 4][5]  #=&gt; 15
   p b.curry(1)                 #=&gt; wrong number of arguments (1 or 3)

   b = proc { :foo }
   p b.curry[]                  #=&gt; :foo
</pre>

        </div>
      </div>


      <div id="method-M001053" class="method-detail">
        <a name="M001053"></a>

        <div class="method-heading">

          <a href="Proc.src/M001053.html" target="Code" class="method-signature"
            onclick="popupCode('Proc.src/M001053.html');return false;">

          <span class="method-name">prc == other_proc   =>  true or false<br />
</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Return <tt>true</tt> if <em>prc</em> is the same object as
<em>other_proc</em>, or if they are both procs with the same body.
</p>

        </div>
      </div>


      <div id="method-M001054" class="method-detail">
        <a name="M001054"></a>

        <div class="method-heading">

          <a href="Proc.src/M001054.html" target="Code" class="method-signature"
            onclick="popupCode('Proc.src/M001054.html');return false;">

          <span class="method-name">prc.hash   =>  integer<br />
</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Return hash value corresponding to proc body.
</p>

        </div>
      </div>


      <div id="method-M001056" class="method-detail">
        <a name="M001056"></a>

        <div class="method-heading">

          <a href="Proc.src/M001056.html" target="Code" class="method-signature"
            onclick="popupCode('Proc.src/M001056.html');return false;">

          <span class="method-name">prc.lambda? => true or false<br />
</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Returns true for a <a href="Proc.html">Proc</a> object which argument
handling is rigid. Such procs are typically generated by lambda.
</p>
<p>
A <a href="Proc.html">Proc</a> object generated by proc ignore extra
arguments.
</p>
<pre>
  proc {|a,b| [a,b] }.call(1,2,3)    =&gt; [1,2]
</pre>
<p>
It provides nil for lacked arguments.
</p>
<pre>
  proc {|a,b| [a,b] }.call(1)        =&gt; [1,nil]
</pre>
<p>
It expand single-array argument.
</p>
<pre>
  proc {|a,b| [a,b] }.call([1,2])    =&gt; [1,2]
</pre>
<p>
A <a href="Proc.html">Proc</a> object generated by lambda doesn&#8217;t
have such tricks.
</p>
<pre>
  lambda {|a,b| [a,b] }.call(1,2,3)  =&gt; ArgumentError
  lambda {|a,b| [a,b] }.call(1)      =&gt; ArgumentError
  lambda {|a,b| [a,b] }.call([1,2])  =&gt; ArgumentError
</pre>
<p>
<a href="Proc.html#M001056">Proc#lambda?</a> is a predicate for the tricks.
It returns true if no tricks.
</p>
<pre>
  lambda {}.lambda?          =&gt; true
  proc {}.lambda?            =&gt; false
</pre>
<p>
<a href="Proc.html#M001045">Proc.new</a> is same as proc.
</p>
<pre>
  Proc.new {}.lambda?        =&gt; false
</pre>
<p>
lambda, proc and <a href="Proc.html#M001045">Proc.new</a> preserves the
tricks of a <a href="Proc.html">Proc</a> object given by &amp; argument.
</p>
<pre>
  lambda(&amp;lambda {}).lambda?   =&gt; true
  proc(&amp;lambda {}).lambda?     =&gt; true
  Proc.new(&amp;lambda {}).lambda? =&gt; true

  lambda(&amp;proc {}).lambda?   =&gt; false
  proc(&amp;proc {}).lambda?     =&gt; false
  Proc.new(&amp;proc {}).lambda? =&gt; false
</pre>
<p>
A <a href="Proc.html">Proc</a> object generated by &amp; argument has the
tricks
</p>
<pre>
  def n(&amp;b) b.lambda? end
  n {}                       =&gt; false
</pre>
<p>
The &amp; argument preserves the tricks if a <a href="Proc.html">Proc</a>
object is given by &amp; argument.
</p>
<pre>
  n(&amp;lambda {})              =&gt; true
  n(&amp;proc {})                =&gt; false
  n(&amp;Proc.new {})            =&gt; false
</pre>
<p>
A <a href="Proc.html">Proc</a> object converted from a method has no
tricks.
</p>
<pre>
  def m() end
  method(:m).to_proc.lambda? =&gt; true

  n(&amp;method(:m))             =&gt; true
  n(&amp;method(:m).to_proc)     =&gt; true
</pre>
<p>
define_method is treated same as method definition. The defined method has
no tricks.
</p>
<pre>
  class C
    define_method(:d) {}
  end
  C.new.e(1,2)       =&gt; ArgumentError
  C.new.method(:d).to_proc.lambda?   =&gt; true
</pre>
<p>
define_method always defines a method without the tricks, even if a
non-lambda <a href="Proc.html">Proc</a> object is given. This is the only
exception which the tricks are not preserved.
</p>
<pre>
  class C
    define_method(:e, &amp;proc {})
  end
  C.new.e(1,2)       =&gt; ArgumentError
  C.new.method(:e).to_proc.lambda?   =&gt; true
</pre>
<p>
This exception is for a wrapper of define_method. It eases defining a
method defining method which defines a usual method which has no tricks.
</p>
<pre>
  class &lt;&lt; C
    def def2(name, &amp;body)
      define_method(name, &amp;body)
    end
  end
  class C
    def2(:f) {}
  end
  C.new.f(1,2)       =&gt; ArgumentError
</pre>
<p>
The wrapper, def2, defines a method which has no tricks.
</p>

        </div>
      </div>


      <div id="method-M001059" class="method-detail">
        <a name="M001059"></a>

        <div class="method-heading">

          <a href="Proc.src/M001059.html" target="Code" class="method-signature"
            onclick="popupCode('Proc.src/M001059.html');return false;">

          <span class="method-name">prc.source_location  => [String, Fixnum]<br />
</span>

          </a>

        </div>

        <div class="method-description">

          <p>
returns the ruby source filename and line number containing this proc or
nil if this proc was not defined in ruby (i.e. native)
</p>

        </div>
      </div>


      <div id="method-M001050" class="method-detail">
        <a name="M001050"></a>

        <div class="method-heading">

          <a href="Proc.src/M001050.html" target="Code" class="method-signature"
            onclick="popupCode('Proc.src/M001050.html');return false;">

          <span class="method-name">prc.to_proc &rarr; prc<br />
</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Part of the protocol for converting objects to <tt>Proc</tt> objects.
Instances of class <tt>Proc</tt> simply return themselves.
</p>

        </div>
      </div>


      <div id="method-M001055" class="method-detail">
        <a name="M001055"></a>

        <div class="method-heading">

          <a href="Proc.src/M001055.html" target="Code" class="method-signature"
            onclick="popupCode('Proc.src/M001055.html');return false;">

          <span class="method-name">prc.to_s   => string<br />
</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Shows the unique identifier for this proc, along with an indication of
where the proc was defined.
</p>

        </div>
      </div>


      <div id="method-M001049" class="method-detail">
        <a name="M001049"></a>

        <div class="method-heading">

          <a href="Proc.src/M001049.html" target="Code" class="method-signature"
            onclick="popupCode('Proc.src/M001049.html');return false;">

          <span class="method-name">prc === obj   => obj<br />
</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Invokes the block, with <em>obj</em> as the block&#8217;s parameter. It is
to allow a proc object to be a target of when clause in the case statement.
</p>

        </div>
      </div>



    </div>




  </div>

<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>
