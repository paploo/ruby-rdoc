<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Class: PrettyPrint [RDoc Documentation]</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href=".././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;

    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }

  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }<\/style>" )

  // ]]>
  </script>

</head>
<body>


    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td><strong>Class</strong></td>
          <td class="class-name-in-header">PrettyPrint</td>
        </tr>
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>


                <a href="../files/lib/prettyprint_rb.html">

                lib/prettyprint.rb

                </a>


        <br />

            </td>
        </tr>


        <tr class="top-aligned-row">
            <td><strong>Parent:</strong></td>
            <td>

                <a href="Object.html">

                Object

               </a>

            </td>
        </tr>

        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">

  <div id="contextContent">

    <div id="description">
      <p>
This class implements a pretty printing algorithm. It finds line breaks and
nice indentations for grouped structure.
</p>
<p>
By default, the class assumes that primitive elements are strings and each
byte in the strings have single column in width. But it can be used for
other situations by giving suitable arguments for some methods:
</p>
<ul>
<li>newline object and space generation block for <a
href="PrettyPrint.html#M002051">PrettyPrint.new</a>

</li>
<li>optional width argument for <a
href="PrettyPrint.html#M002055">PrettyPrint#text</a>

</li>
<li><a href="PrettyPrint.html#M002057">PrettyPrint#breakable</a>

</li>
</ul>
<p>
There are several candidate uses:
</p>
<ul>
<li>text formatting using proportional fonts

</li>
<li>multibyte characters which has columns different to number of bytes

</li>
<li>non-string formatting

</li>
</ul>
<h2>Bugs</h2>
<ul>
<li>Box based formatting?

</li>
<li>Other (better) model/algorithm?

</li>
</ul>
<h2>References</h2>
<p>
Christian Lindig, Strictly Pretty, March 2000, <a
href="http://www.st.cs.uni-sb.de/~lindig/papers/#pretty">www.st.cs.uni-sb.de/~lindig/papers/#pretty</a>
</p>
<p>
Philip Wadler, A prettier printer, March 1998, <a
href="http://homepages.inf.ed.ac.uk/wadler/topics/language-design.html#prettier">homepages.inf.ed.ac.uk/wadler/topics/language-design.html#prettier</a>
</p>
<h2>Author</h2>
<p>
Tanaka Akira <akr@m17n.org>
</p>

    </div>

   </div>


    <div id="method-list">
      <h3 class="section-bar">Methods</h3>

      <div class="name-list">

        <a href="#M002054">break_outmost_groups</a>&nbsp;&nbsp;

        <a href="#M002057">breakable</a>&nbsp;&nbsp;

        <a href="#M002052">current_group</a>&nbsp;&nbsp;

        <a href="#M002056">fill_breakable</a>&nbsp;&nbsp;

        <a href="#M002053">first?</a>&nbsp;&nbsp;

        <a href="#M002061">flush</a>&nbsp;&nbsp;

        <a href="#M002049">format</a>&nbsp;&nbsp;

        <a href="#M002058">group</a>&nbsp;&nbsp;

        <a href="#M002059">group_sub</a>&nbsp;&nbsp;

        <a href="#M002060">nest</a>&nbsp;&nbsp;

        <a href="#M002051">new</a>&nbsp;&nbsp;

        <a href="#M002050">singleline_format</a>&nbsp;&nbsp;

        <a href="#M002055">text</a>&nbsp;&nbsp;

      </div>
    </div>

  </div>

    <!-- if includes -->

    <div id="section">

    <div id="class-list">
      <h3 class="section-bar">Classes and Modules</h3>

      Class <a href="PrettyPrint/Breakable.html" class="link">PrettyPrint::Breakable</a><br />
Class <a href="PrettyPrint/Group.html" class="link">PrettyPrint::Group</a><br />
Class <a href="PrettyPrint/GroupQueue.html" class="link">PrettyPrint::GroupQueue</a><br />
Class <a href="PrettyPrint/SingleLine.html" class="link">PrettyPrint::SingleLine</a><br />
Class <a href="PrettyPrint/Text.html" class="link">PrettyPrint::Text</a><br />

    </div>



    <div id="attribute-list">
      <h3 class="section-bar">Attributes</h3>

      <div class="name-list">
        <table>

        <tr class="top-aligned-row context-row">
          <td class="context-item-name">genspace</td>

          <td class="context-item-value">&nbsp;[R]&nbsp;</td>

          <td class="context-item-desc"></td>
        </tr>

        <tr class="top-aligned-row context-row">
          <td class="context-item-name">group_queue</td>

          <td class="context-item-value">&nbsp;[R]&nbsp;</td>

          <td class="context-item-desc"></td>
        </tr>

        <tr class="top-aligned-row context-row">
          <td class="context-item-name">indent</td>

          <td class="context-item-value">&nbsp;[R]&nbsp;</td>

          <td class="context-item-desc"></td>
        </tr>

        <tr class="top-aligned-row context-row">
          <td class="context-item-name">maxwidth</td>

          <td class="context-item-value">&nbsp;[R]&nbsp;</td>

          <td class="context-item-desc"></td>
        </tr>

        <tr class="top-aligned-row context-row">
          <td class="context-item-name">newline</td>

          <td class="context-item-value">&nbsp;[R]&nbsp;</td>

          <td class="context-item-desc"></td>
        </tr>

        <tr class="top-aligned-row context-row">
          <td class="context-item-name">output</td>

          <td class="context-item-value">&nbsp;[R]&nbsp;</td>

          <td class="context-item-desc"></td>
        </tr>

        </table>
      </div>
    </div>


    <!-- if method_list -->

    <div id="methods">

      <h3 class="section-bar">Public Class methods</h3>


      <div id="method-M002049" class="method-detail">
        <a name="M002049"></a>

        <div class="method-heading">

          <a href="PrettyPrint.src/M002049.html" target="Code" class="method-signature"
            onclick="popupCode('PrettyPrint.src/M002049.html');return false;">

          <span class="method-name">format</span><span class="method-args">(output='', maxwidth=79, newline=&quot;\n&quot;, genspace=lambda {|n| ' ' * n} {|q| ...}</span>

          </a>

        </div>

        <div class="method-description">

          <p>
This is a convenience method which is same as follows:
</p>
<pre>
  begin
    q = PrettyPrint.new(output, maxwidth, newline, &amp;genspace)
    ...
    q.flush
    output
  end
</pre>

        </div>
      </div>


      <div id="method-M002051" class="method-detail">
        <a name="M002051"></a>

        <div class="method-heading">

          <a href="PrettyPrint.src/M002051.html" target="Code" class="method-signature"
            onclick="popupCode('PrettyPrint.src/M002051.html');return false;">

          <span class="method-name">new</span><span class="method-args">(output='', maxwidth=79, newline=&quot;\n&quot;, &amp;genspace)</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Creates a buffer for pretty printing.
</p>
<p>
<tt>output</tt> is an output target. If it is not specified, &#8217;&#8217;
is assumed. It should have a << method which accepts the first argument
<tt>obj</tt> of <a href="PrettyPrint.html#M002055">PrettyPrint#text</a>,
the first argument <tt>sep</tt> of <a
href="PrettyPrint.html#M002057">PrettyPrint#breakable</a>, the first
argument <tt>newline</tt> of <a
href="PrettyPrint.html#M002051">PrettyPrint.new</a>, and the result of a
given block for <a href="PrettyPrint.html#M002051">PrettyPrint.new</a>.
</p>
<p>
<tt>maxwidth</tt> specifies maximum line length. If it is not specified, 79
is assumed. However actual outputs may overflow <tt>maxwidth</tt> if long
non-breakable texts are provided.
</p>
<p>
<tt>newline</tt> is used for line breaks. &#8220;n&#8220; is used if it is
not specified.
</p>
<p>
The block is used to generate spaces. {|width| &#8217; &#8217; * width} is
used if it is not given.
</p>

        </div>
      </div>


      <div id="method-M002050" class="method-detail">
        <a name="M002050"></a>

        <div class="method-heading">

          <a href="PrettyPrint.src/M002050.html" target="Code" class="method-signature"
            onclick="popupCode('PrettyPrint.src/M002050.html');return false;">

          <span class="method-name">singleline_format</span><span class="method-args">(output='', maxwidth=nil, newline=nil, genspace=nil) {|q| ...}</span>

          </a>

        </div>

        <div class="method-description">

          <p>
This is similar to PrettyPrint::format but the result has no breaks.
</p>
<p>
<tt>maxwidth</tt>, <tt>newline</tt> and <tt>genspace</tt> are ignored.
</p>
<p>
The invocation of <tt>breakable</tt> in the block doesn&#8217;t break a
line and is treated as just an invocation of <tt>text</tt>.
</p>

        </div>
      </div>


      <h3 class="section-bar">Public Instance methods</h3>


      <div id="method-M002054" class="method-detail">
        <a name="M002054"></a>

        <div class="method-heading">

          <a href="PrettyPrint.src/M002054.html" target="Code" class="method-signature"
            onclick="popupCode('PrettyPrint.src/M002054.html');return false;">

          <span class="method-name">break_outmost_groups</span><span class="method-args">()</span>

          </a>

        </div>

        <div class="method-description">

        </div>
      </div>


      <div id="method-M002057" class="method-detail">
        <a name="M002057"></a>

        <div class="method-heading">

          <a href="PrettyPrint.src/M002057.html" target="Code" class="method-signature"
            onclick="popupCode('PrettyPrint.src/M002057.html');return false;">

          <span class="method-name">breakable</span><span class="method-args">(sep=' ', width=sep.length)</span>

          </a>

        </div>

        <div class="method-description">

          <p>
This tells &#8220;you can break a line here if necessary&#8221;, and a
<tt>width</tt>-column text <tt>sep</tt> is inserted if a line is not broken
at the point.
</p>
<p>
If <tt>sep</tt> is not specified, &#8220; &#8220; is used.
</p>
<p>
If <tt>width</tt> is not specified, <tt>sep.length</tt> is used. You will
have to specify this when <tt>sep</tt> is a multibyte character, for
example.
</p>

        </div>
      </div>


      <div id="method-M002052" class="method-detail">
        <a name="M002052"></a>

        <div class="method-heading">

          <a href="PrettyPrint.src/M002052.html" target="Code" class="method-signature"
            onclick="popupCode('PrettyPrint.src/M002052.html');return false;">

          <span class="method-name">current_group</span><span class="method-args">()</span>

          </a>

        </div>

        <div class="method-description">

        </div>
      </div>


      <div id="method-M002056" class="method-detail">
        <a name="M002056"></a>

        <div class="method-heading">

          <a href="PrettyPrint.src/M002056.html" target="Code" class="method-signature"
            onclick="popupCode('PrettyPrint.src/M002056.html');return false;">

          <span class="method-name">fill_breakable</span><span class="method-args">(sep=' ', width=sep.length)</span>

          </a>

        </div>

        <div class="method-description">

        </div>
      </div>


      <div id="method-M002053" class="method-detail">
        <a name="M002053"></a>

        <div class="method-heading">

          <a href="PrettyPrint.src/M002053.html" target="Code" class="method-signature"
            onclick="popupCode('PrettyPrint.src/M002053.html');return false;">

          <span class="method-name">first?</span><span class="method-args">()</span>

          </a>

        </div>

        <div class="method-description">

          <p>
first? is a predicate to test the call is a first call to first? with
current group.
</p>
<p>
It is useful to format comma separated values as:
</p>
<pre>
  q.group(1, '[', ']') {
    xxx.each {|yyy|
      unless q.first?
        q.text ','
        q.breakable
      end
      ... pretty printing yyy ...
    }
  }
</pre>
<p>
first? is obsoleted in 1.8.2.
</p>

        </div>
      </div>


      <div id="method-M002061" class="method-detail">
        <a name="M002061"></a>

        <div class="method-heading">

          <a href="PrettyPrint.src/M002061.html" target="Code" class="method-signature"
            onclick="popupCode('PrettyPrint.src/M002061.html');return false;">

          <span class="method-name">flush</span><span class="method-args">()</span>

          </a>

        </div>

        <div class="method-description">

          <p>
outputs buffered data.
</p>

        </div>
      </div>


      <div id="method-M002058" class="method-detail">
        <a name="M002058"></a>

        <div class="method-heading">

          <a href="PrettyPrint.src/M002058.html" target="Code" class="method-signature"
            onclick="popupCode('PrettyPrint.src/M002058.html');return false;">

          <span class="method-name">group</span><span class="method-args">(indent=0, open_obj='', close_obj='', open_width=open_obj.length, close_width=close_obj.length) {|| ...}</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Groups line break hints added in the block. The line break hints are all to
be used or not.
</p>
<p>
If <tt>indent</tt> is specified, the method call is regarded as nested by
nest(indent) { &#8230; }.
</p>
<p>
If <tt>open_obj</tt> is specified, <tt>text open_obj, open_width</tt> is
called before grouping. If <tt>close_obj</tt> is specified, <tt>text
close_obj, close_width</tt> is called after grouping.
</p>

        </div>
      </div>


      <div id="method-M002059" class="method-detail">
        <a name="M002059"></a>

        <div class="method-heading">

          <a href="PrettyPrint.src/M002059.html" target="Code" class="method-signature"
            onclick="popupCode('PrettyPrint.src/M002059.html');return false;">

          <span class="method-name">group_sub</span><span class="method-args">() {|| ...}</span>

          </a>

        </div>

        <div class="method-description">

        </div>
      </div>


      <div id="method-M002060" class="method-detail">
        <a name="M002060"></a>

        <div class="method-heading">

          <a href="PrettyPrint.src/M002060.html" target="Code" class="method-signature"
            onclick="popupCode('PrettyPrint.src/M002060.html');return false;">

          <span class="method-name">nest</span><span class="method-args">(indent) {|| ...}</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Increases left margin after newline with <tt>indent</tt> for line breaks
added in the block.
</p>

        </div>
      </div>


      <div id="method-M002055" class="method-detail">
        <a name="M002055"></a>

        <div class="method-heading">

          <a href="PrettyPrint.src/M002055.html" target="Code" class="method-signature"
            onclick="popupCode('PrettyPrint.src/M002055.html');return false;">

          <span class="method-name">text</span><span class="method-args">(obj, width=obj.length)</span>

          </a>

        </div>

        <div class="method-description">

          <p>
This adds <tt>obj</tt> as a text of <tt>width</tt> columns in width.
</p>
<p>
If <tt>width</tt> is not specified, obj.length is used.
</p>

        </div>
      </div>



    </div>




  </div>

<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>
