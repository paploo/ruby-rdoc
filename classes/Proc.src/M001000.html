<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>yield (Proc)</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <link rel="stylesheet" href="../.././rdoc-style.css" type="text/css" media="screen" />
</head>
<body class="standalone-code">
  <pre>/*
 *  call-seq:
 *     prc === obj   =&gt; obj
 *  
 *  Invokes the block, with &lt;i&gt;obj&lt;/i&gt; as the block's parameter.  It is
 *  to allow a proc object to be a target of when clause in the case statement.
 */

static VALUE
proc_call(int argc, VALUE *argv, VALUE procval)
{
    rb_proc_t *proc;
    rb_block_t *blockptr = 0;
    rb_iseq_t *iseq;
    GetProcPtr(procval, proc);

    iseq = proc-&gt;block.iseq;
    if (BUILTIN_TYPE(iseq) == T_NODE || iseq-&gt;arg_block != -1) {
        if (rb_block_given_p()) {
            rb_proc_t *proc;
            VALUE procval;
            procval = rb_block_proc();
            GetProcPtr(procval, proc);
            blockptr = &amp;proc-&gt;block;
        }
    }

    return rb_vm_invoke_proc(GET_THREAD(), proc, proc-&gt;block.self,
                             argc, argv, blockptr);
}</pre>
</body>
</html>
