<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Class: REXML::Text [RDoc Documentation]</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href="../.././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;

    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }

  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }<\/style>" )

  // ]]>
  </script>

</head>
<body>


    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td><strong>Class</strong></td>
          <td class="class-name-in-header">REXML::Text</td>
        </tr>
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>


                <a href="../../files/lib/rexml/text_rb.html">

                lib/rexml/text.rb

                </a>


        <br />

            </td>
        </tr>


        <tr class="top-aligned-row">
            <td><strong>Parent:</strong></td>
            <td>

                <a href="Child.html">

                REXML::Child

               </a>

            </td>
        </tr>

        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">

  <div id="contextContent">

    <div id="description">
      <p>
Represents text nodes in an <a href="../XML.html">XML</a> document
</p>

    </div>

   </div>


    <div id="method-list">
      <h3 class="section-bar">Methods</h3>

      <div class="name-list">

        <a href="#M005761">&lt;&lt;</a>&nbsp;&nbsp;

        <a href="#M005762">&lt;=&gt;</a>&nbsp;&nbsp;

        <a href="#M005757">check</a>&nbsp;&nbsp;

        <a href="#M005760">clone</a>&nbsp;&nbsp;

        <a href="#M005763">doctype</a>&nbsp;&nbsp;

        <a href="#M005759">empty?</a>&nbsp;&nbsp;

        <a href="#M005769">indent_text</a>&nbsp;&nbsp;

        <a href="#M005765">inspect</a>&nbsp;&nbsp;

        <a href="#M005755">new</a>&nbsp;&nbsp;

        <a href="#M005758">node_type</a>&nbsp;&nbsp;

        <a href="#M005774">normalize</a>&nbsp;&nbsp;

        <a href="#M005756">parent=</a>&nbsp;&nbsp;

        <a href="#M005773">read_with_substitution</a>&nbsp;&nbsp;

        <a href="#M005764">to_s</a>&nbsp;&nbsp;

        <a href="#M005775">unnormalize</a>&nbsp;&nbsp;

        <a href="#M005766">value</a>&nbsp;&nbsp;

        <a href="#M005767">value=</a>&nbsp;&nbsp;

        <a href="#M005768">wrap</a>&nbsp;&nbsp;

        <a href="#M005770">write</a>&nbsp;&nbsp;

        <a href="#M005772">write_with_substitution</a>&nbsp;&nbsp;

        <a href="#M005771">xpath</a>&nbsp;&nbsp;

      </div>
    </div>

  </div>

    <!-- if includes -->

    <div id="includes">
      <h3 class="section-bar">Included Modules</h3>

      <div id="includes-list">

        <span class="include-name"><a href="../Comparable.html">Comparable</a></span>

      </div>
    </div>

    <div id="section">

    <div id="constants-list">
      <h3 class="section-bar">Constants</h3>

      <div class="name-list">
        <table summary="Constants">

        <tr class="top-aligned-row context-row">
          <td class="context-item-name">SPECIALS</td>
          <td>=</td>
          <td class="context-item-value">[ /&amp;(?!#?[\w-]+;)/u, /&lt;/u, /&gt;/u, /&quot;/u, /'/u, /\r/u ]</td>

          <td>&nbsp;</td>
          <td class="context-item-desc">
The order in which the substitutions occur

</td>

        </tr>

        <tr class="top-aligned-row context-row">
          <td class="context-item-name">SUBSTITUTES</td>
          <td>=</td>
          <td class="context-item-value">['&amp;amp;', '&amp;lt;', '&amp;gt;', '&amp;quot;', '&amp;apos;', '&amp;#13;']</td>

        </tr>

        <tr class="top-aligned-row context-row">
          <td class="context-item-name">SLAICEPS</td>
          <td>=</td>
          <td class="context-item-value">[ '&lt;', '&gt;', '&quot;', &quot;'&quot;, '&amp;' ]</td>

          <td>&nbsp;</td>
          <td class="context-item-desc">
Characters which are substituted in written strings

</td>

        </tr>

        <tr class="top-aligned-row context-row">
          <td class="context-item-name">SETUTITSBUS</td>
          <td>=</td>
          <td class="context-item-value">[ /&amp;lt;/u, /&amp;gt;/u, /&amp;quot;/u, /&amp;apos;/u, /&amp;amp;/u ]</td>

        </tr>

        <tr class="top-aligned-row context-row">
          <td class="context-item-name">NEEDS_A_SECOND_CHECK</td>
          <td>=</td>
          <td class="context-item-value">/(&lt;|&amp;((#{Entity::NAME});|(#0*((?:\d+)|(?:x[a-fA-F0-9]+)));)?)/um</td>

        </tr>

        <tr class="top-aligned-row context-row">
          <td class="context-item-name">NUMERICENTITY</td>
          <td>=</td>
          <td class="context-item-value">/&amp;#0*((?:\d+)|(?:x[a-fA-F0-9]+));/</td>

        </tr>

        <tr class="top-aligned-row context-row">
          <td class="context-item-name">VALID_CHAR</td>
          <td>=</td>
          <td class="context-item-value">[       0x9, 0xA, 0xD,       (0x20..0xD7FF),       (0xE000..0xFFFD),       (0x10000..0x10FFFF)     ]</td>

        </tr>

        <tr class="top-aligned-row context-row">
          <td class="context-item-name">VALID_XML_CHARS</td>
          <td>=</td>
          <td class="context-item-value">Regexp.new('^['+         VALID_CHAR.map { |item|           case item           when Fixnum             [item].pack('U').force_encoding('utf-8')           when Range             [item.first, '-'.ord, item.last].pack('UUU').force_encoding('utf-8')           end</td>

        </tr>

        <tr class="top-aligned-row context-row">
          <td class="context-item-name">VALID_XML_CHARS</td>
          <td>=</td>
          <td class="context-item-value">/^(            [\x09\x0A\x0D\x20-\x7E]            # ASCII          | [\xC2-\xDF][\x80-\xBF]             # non-overlong 2-byte          |  \xE0[\xA0-\xBF][\x80-\xBF]        # excluding overlongs          | [\xE1-\xEC\xEE][\x80-\xBF]{2}      # straight 3-byte          |  \xEF[\x80-\xBE]{2}                #          |  \xEF\xBF[\x80-\xBD]               # excluding U+fffe and U+ffff          |  \xED[\x80-\x9F][\x80-\xBF]        # excluding surrogates          |  \xF0[\x90-\xBF][\x80-\xBF]{2}     # planes 1-3          | [\xF1-\xF3][\x80-\xBF]{3}          # planes 4-15          |  \xF4[\x80-\x8F][\x80-\xBF]{2}     # plane 16        )*$/nx;</td>

        </tr>

        <tr class="top-aligned-row context-row">
          <td class="context-item-name">REFERENCE</td>
          <td>=</td>
          <td class="context-item-value">/#{Entity::REFERENCE}/</td>

        </tr>

        <tr class="top-aligned-row context-row">
          <td class="context-item-name">EREFERENCE</td>
          <td>=</td>
          <td class="context-item-value">/&amp;(?!#{Entity::NAME};)/</td>

        </tr>

        </table>
      </div>
    </div>



    <div id="attribute-list">
      <h3 class="section-bar">Attributes</h3>

      <div class="name-list">
        <table>

        <tr class="top-aligned-row context-row">
          <td class="context-item-name">raw</td>

          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>

          <td class="context-item-desc">
If <tt>raw</tt> is true, then <a href="../REXML.html">REXML</a> leaves the
value alone

</td>
        </tr>

        </table>
      </div>
    </div>


    <!-- if method_list -->

    <div id="methods">

      <h3 class="section-bar">Public Class methods</h3>


      <div id="method-M005757" class="method-detail">
        <a name="M005757"></a>

        <div class="method-heading">

          <a href="Text.src/M005757.html" target="Code" class="method-signature"
            onclick="popupCode('Text.src/M005757.html');return false;">

          <span class="method-name">check</span><span class="method-args">(string, pattern, doctype)</span>

          </a>

        </div>

        <div class="method-description">

          <p>
check for illegal characters
</p>

        </div>
      </div>


      <div id="method-M005755" class="method-detail">
        <a name="M005755"></a>

        <div class="method-heading">

          <a href="Text.src/M005755.html" target="Code" class="method-signature"
            onclick="popupCode('Text.src/M005755.html');return false;">

          <span class="method-name">new</span><span class="method-args">(arg, respect_whitespace=false, parent=nil, raw=nil, entity_filter=nil, illegal=NEEDS_A_SECOND_CHECK )</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Constructor <tt>arg</tt> if a <a href="../String.html">String</a>, the
content is set to the <a href="../String.html">String</a>. If a <a
href="Text.html">Text</a>, the object is shallowly cloned.
</p>
<p>
<tt>respect_whitespace</tt> (boolean, false) if true, whitespace is
respected
</p>
<p>
<tt>parent</tt> (nil) if this is a <a href="Parent.html">Parent</a> object,
the parent will be set to this.
</p>
<p>
<tt>raw</tt> (nil) This argument can be given three values. If true, then
the value of used to construct this object is expected to contain no
unescaped <a href="../XML.html">XML</a> markup, and <a
href="../REXML.html">REXML</a> will not change the text. If this value is
false, the string may contain any characters, and <a
href="../REXML.html">REXML</a> will escape any and all defined entities
whose values are contained in the text. If this value is nil (the default),
then the raw value of the parent will be used as the raw value for this
node. If there is no raw value for the parent, and no value is supplied,
the default is false. Use this field if you have entities defined for some
text, and you don&#8217;t want <a href="../REXML.html">REXML</a> to escape
that text in output.
</p>
<pre>
  Text.new( &quot;&lt;&amp;&quot;, false, nil, false ) #-&gt; &quot;&amp;lt;&amp;amp;&quot;
  Text.new( &quot;&amp;lt;&amp;amp;&quot;, false, nil, false ) #-&gt; &quot;&amp;amp;lt;&amp;amp;amp;&quot;
  Text.new( &quot;&lt;&amp;&quot;, false, nil, true )  #-&gt; Parse exception
  Text.new( &quot;&amp;lt;&amp;amp;&quot;, false, nil, true )  #-&gt; &quot;&amp;lt;&amp;amp;&quot;
  # Assume that the entity &quot;s&quot; is defined to be &quot;sean&quot;
  # and that the entity    &quot;r&quot; is defined to be &quot;russell&quot;
  Text.new( &quot;sean russell&quot; )          #-&gt; &quot;&amp;s; &amp;r;&quot;
  Text.new( &quot;sean russell&quot;, false, nil, true ) #-&gt; &quot;sean russell&quot;
</pre>
<p>
<tt>entity_filter</tt> (nil) This can be an array of entities to match in
the supplied text. This argument is only useful if <tt>raw</tt> is set to
false.
</p>
<pre>
  Text.new( &quot;sean russell&quot;, false, nil, false, [&quot;s&quot;] ) #-&gt; &quot;&amp;s; russell&quot;
  Text.new( &quot;sean russell&quot;, false, nil, true, [&quot;s&quot;] ) #-&gt; &quot;sean russell&quot;
</pre>
<p>
In the last example, the <tt>entity_filter</tt> argument is ignored.
</p>
<p>
<tt>pattern</tt> INTERNAL USE ONLY
</p>

        </div>
      </div>


      <div id="method-M005774" class="method-detail">
        <a name="M005774"></a>

        <div class="method-heading">

          <a href="Text.src/M005774.html" target="Code" class="method-signature"
            onclick="popupCode('Text.src/M005774.html');return false;">

          <span class="method-name">normalize</span><span class="method-args">( input, doctype=nil, entity_filter=nil )</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Escapes all possible entities
</p>

        </div>
      </div>


      <div id="method-M005773" class="method-detail">
        <a name="M005773"></a>

        <div class="method-heading">

          <a href="Text.src/M005773.html" target="Code" class="method-signature"
            onclick="popupCode('Text.src/M005773.html');return false;">

          <span class="method-name">read_with_substitution</span><span class="method-args">( input, illegal=nil )</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Reads text, substituting entities
</p>

        </div>
      </div>


      <div id="method-M005775" class="method-detail">
        <a name="M005775"></a>

        <div class="method-heading">

          <a href="Text.src/M005775.html" target="Code" class="method-signature"
            onclick="popupCode('Text.src/M005775.html');return false;">

          <span class="method-name">unnormalize</span><span class="method-args">( string, doctype=nil, filter=nil, illegal=nil )</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Unescapes all possible entities
</p>

        </div>
      </div>


      <h3 class="section-bar">Public Instance methods</h3>


      <div id="method-M005761" class="method-detail">
        <a name="M005761"></a>

        <div class="method-heading">

          <a href="Text.src/M005761.html" target="Code" class="method-signature"
            onclick="popupCode('Text.src/M005761.html');return false;">

          <span class="method-name">&lt;&lt;</span><span class="method-args">( to_append )</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Appends text to this text node. The text is appended in the <tt>raw</tt>
mode of this text node.
</p>

        </div>
      </div>


      <div id="method-M005762" class="method-detail">
        <a name="M005762"></a>

        <div class="method-heading">

          <a href="Text.src/M005762.html" target="Code" class="method-signature"
            onclick="popupCode('Text.src/M005762.html');return false;">

          <span class="method-name">&lt;=&gt;</span><span class="method-args">( other )</span>

          </a>

        </div>

        <div class="method-description">

          <p>
<tt>other</tt> a <a href="../String.html">String</a> or a <a
href="Text.html">Text</a> <tt>returns</tt> the result of (<a
href="Text.html#M005764">to_s</a> <=> arg.to_s)
</p>

        </div>
      </div>


      <div id="method-M005760" class="method-detail">
        <a name="M005760"></a>

        <div class="method-heading">

          <a href="Text.src/M005760.html" target="Code" class="method-signature"
            onclick="popupCode('Text.src/M005760.html');return false;">

          <span class="method-name">clone</span><span class="method-args">()</span>

          </a>

        </div>

        <div class="method-description">

        </div>
      </div>


      <div id="method-M005763" class="method-detail">
        <a name="M005763"></a>

        <div class="method-heading">

          <a href="Text.src/M005763.html" target="Code" class="method-signature"
            onclick="popupCode('Text.src/M005763.html');return false;">

          <span class="method-name">doctype</span><span class="method-args">()</span>

          </a>

        </div>

        <div class="method-description">

        </div>
      </div>


      <div id="method-M005759" class="method-detail">
        <a name="M005759"></a>

        <div class="method-heading">

          <a href="Text.src/M005759.html" target="Code" class="method-signature"
            onclick="popupCode('Text.src/M005759.html');return false;">

          <span class="method-name">empty?</span><span class="method-args">()</span>

          </a>

        </div>

        <div class="method-description">

        </div>
      </div>


      <div id="method-M005769" class="method-detail">
        <a name="M005769"></a>

        <div class="method-heading">

          <a href="Text.src/M005769.html" target="Code" class="method-signature"
            onclick="popupCode('Text.src/M005769.html');return false;">

          <span class="method-name">indent_text</span><span class="method-args">(string, level=1, style=&quot;\t&quot;, indentfirstline=true)</span>

          </a>

        </div>

        <div class="method-description">

        </div>
      </div>


      <div id="method-M005765" class="method-detail">
        <a name="M005765"></a>

        <div class="method-heading">

          <a href="Text.src/M005765.html" target="Code" class="method-signature"
            onclick="popupCode('Text.src/M005765.html');return false;">

          <span class="method-name">inspect</span><span class="method-args">()</span>

          </a>

        </div>

        <div class="method-description">

        </div>
      </div>


      <div id="method-M005758" class="method-detail">
        <a name="M005758"></a>

        <div class="method-heading">

          <a href="Text.src/M005758.html" target="Code" class="method-signature"
            onclick="popupCode('Text.src/M005758.html');return false;">

          <span class="method-name">node_type</span><span class="method-args">()</span>

          </a>

        </div>

        <div class="method-description">

        </div>
      </div>


      <div id="method-M005756" class="method-detail">
        <a name="M005756"></a>

        <div class="method-heading">

          <a href="Text.src/M005756.html" target="Code" class="method-signature"
            onclick="popupCode('Text.src/M005756.html');return false;">

          <span class="method-name">parent=</span><span class="method-args">(parent)</span>

          </a>

        </div>

        <div class="method-description">

        </div>
      </div>


      <div id="method-M005764" class="method-detail">
        <a name="M005764"></a>

        <div class="method-heading">

          <a href="Text.src/M005764.html" target="Code" class="method-signature"
            onclick="popupCode('Text.src/M005764.html');return false;">

          <span class="method-name">to_s</span><span class="method-args">()</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Returns the string value of this text node. This string is always escaped,
meaning that it is a valid <a href="../XML.html">XML</a> text node string,
and all entities that can be escaped, have been inserted. This method
respects the entity filter set in the constructor.
</p>
<pre>
  # Assume that the entity &quot;s&quot; is defined to be &quot;sean&quot;, and that the
  # entity &quot;r&quot; is defined to be &quot;russell&quot;
  t = Text.new( &quot;&lt; &amp; sean russell&quot;, false, nil, false, ['s'] )
  t.to_s   #-&gt; &quot;&amp;lt; &amp;amp; &amp;s; russell&quot;
  t = Text.new( &quot;&lt; &amp; &amp;s; russell&quot;, false, nil, false )
  t.to_s   #-&gt; &quot;&amp;lt; &amp;amp; &amp;s; russell&quot;
  u = Text.new( &quot;sean russell&quot;, false, nil, true )
  u.to_s   #-&gt; &quot;sean russell&quot;
</pre>

        </div>
      </div>


      <div id="method-M005766" class="method-detail">
        <a name="M005766"></a>

        <div class="method-heading">

          <a href="Text.src/M005766.html" target="Code" class="method-signature"
            onclick="popupCode('Text.src/M005766.html');return false;">

          <span class="method-name">value</span><span class="method-args">()</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Returns the string value of this text. This is the text without entities,
as it might be used programmatically, or printed to the console. This
ignores the &#8216;raw&#8217; attribute setting, and any entity_filter.
</p>
<pre>
  # Assume that the entity &quot;s&quot; is defined to be &quot;sean&quot;, and that the
  # entity &quot;r&quot; is defined to be &quot;russell&quot;
  t = Text.new( &quot;&lt; &amp; sean russell&quot;, false, nil, false, ['s'] )
  t.value   #-&gt; &quot;&lt; &amp; sean russell&quot;
  t = Text.new( &quot;&lt; &amp; &amp;s; russell&quot;, false, nil, false )
  t.value   #-&gt; &quot;&lt; &amp; sean russell&quot;
  u = Text.new( &quot;sean russell&quot;, false, nil, true )
  u.value   #-&gt; &quot;sean russell&quot;
</pre>

        </div>
      </div>


      <div id="method-M005767" class="method-detail">
        <a name="M005767"></a>

        <div class="method-heading">

          <a href="Text.src/M005767.html" target="Code" class="method-signature"
            onclick="popupCode('Text.src/M005767.html');return false;">

          <span class="method-name">value=</span><span class="method-args">( val )</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Sets the contents of this text node. This expects the text to be
unnormalized. It returns self.
</p>
<pre>
  e = Element.new( &quot;a&quot; )
  e.add_text( &quot;foo&quot; )   # &lt;a&gt;foo&lt;/a&gt;
  e[0].value = &quot;bar&quot;    # &lt;a&gt;bar&lt;/a&gt;
  e[0].value = &quot;&lt;a&gt;&quot;    # &lt;a&gt;&amp;lt;a&amp;gt;&lt;/a&gt;
</pre>

        </div>
      </div>


      <div id="method-M005768" class="method-detail">
        <a name="M005768"></a>

        <div class="method-heading">

          <a href="Text.src/M005768.html" target="Code" class="method-signature"
            onclick="popupCode('Text.src/M005768.html');return false;">

          <span class="method-name">wrap</span><span class="method-args">(string, width, addnewline=false)</span>

          </a>

        </div>

        <div class="method-description">

        </div>
      </div>


      <div id="method-M005770" class="method-detail">
        <a name="M005770"></a>

        <div class="method-heading">

          <a href="Text.src/M005770.html" target="Code" class="method-signature"
            onclick="popupCode('Text.src/M005770.html');return false;">

          <span class="method-name">write</span><span class="method-args">( writer, indent=-1, transitive=false, ie_hack=false )</span>

          </a>

        </div>

        <div class="method-description">

          <h2>DEPRECATED</h2>
<p>
See <a href="Formatters.html">REXML::Formatters</a>
</p>

        </div>
      </div>


      <div id="method-M005772" class="method-detail">
        <a name="M005772"></a>

        <div class="method-heading">

          <a href="Text.src/M005772.html" target="Code" class="method-signature"
            onclick="popupCode('Text.src/M005772.html');return false;">

          <span class="method-name">write_with_substitution</span><span class="method-args">(out, input)</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Writes out text, substituting special characters beforehand. <tt>out</tt> A
<a href="../String.html">String</a>, <a href="../IO.html">IO</a>, or any
other object supporting <<( <a href="../String.html">String</a> )
<tt>input</tt> the text to substitute and the write out
</p>
<pre>
  z=utf8.unpack(&quot;U*&quot;)
  ascOut=&quot;&quot;
  z.each{|r|
    if r &lt;  0x100
      ascOut.concat(r.chr)
    else
      ascOut.concat(sprintf(&quot;&amp;#x%x;&quot;, r))
    end
  }
  puts ascOut
</pre>

        </div>
      </div>


      <div id="method-M005771" class="method-detail">
        <a name="M005771"></a>

        <div class="method-heading">

          <a href="Text.src/M005771.html" target="Code" class="method-signature"
            onclick="popupCode('Text.src/M005771.html');return false;">

          <span class="method-name">xpath</span><span class="method-args">()</span>

          </a>

        </div>

        <div class="method-description">

          <p>
FIXME This probably won&#8217;t work properly
</p>

        </div>
      </div>



    </div>




  </div>

<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>
