<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>main_url (RDoc::Generator::HTML)</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <link rel="stylesheet" href="../../../.././rdoc-style.css" type="text/css" media="screen" />
</head>
<body class="standalone-code">
  <pre>     <span class="ruby-comment cmt"># File lib/rdoc/generator/html.rb, line 337</span>
337:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">main_url</span>
338:     <span class="ruby-identifier">main_page</span> = <span class="ruby-ivar">@options</span>.<span class="ruby-identifier">main_page</span>
339: 
340:     <span class="ruby-comment cmt">#</span>
341:     <span class="ruby-comment cmt"># If a main page has been specified (--main), then search for it</span>
342:     <span class="ruby-comment cmt"># in the AllReferences array.  This allows either files or classes</span>
343:     <span class="ruby-comment cmt"># to be used for the main page.</span>
344:     <span class="ruby-comment cmt">#</span>
345:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">main_page</span> <span class="ruby-keyword kw">then</span>
346:       <span class="ruby-identifier">main_page_ref</span> = <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">Generator</span><span class="ruby-operator">::</span><span class="ruby-constant">AllReferences</span>[<span class="ruby-identifier">main_page</span>]
347: 
348:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">main_page_ref</span> <span class="ruby-keyword kw">then</span>
349:         <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">main_page_ref</span>.<span class="ruby-identifier">path</span>
350:       <span class="ruby-keyword kw">else</span>
351:         <span class="ruby-identifier">$stderr</span>.<span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;Could not find main page #{main_page}&quot;</span>
352:       <span class="ruby-keyword kw">end</span>
353:     <span class="ruby-keyword kw">end</span>
354: 
355:     <span class="ruby-comment cmt">#</span>
356:     <span class="ruby-comment cmt"># No main page has been specified, so just use the README.</span>
357:     <span class="ruby-comment cmt">#</span>
358:     <span class="ruby-ivar">@files</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">file</span><span class="ruby-operator">|</span>
359:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">file</span>.<span class="ruby-identifier">name</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^README/</span> <span class="ruby-keyword kw">then</span>
360:         <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">file</span>.<span class="ruby-identifier">path</span>
361:       <span class="ruby-keyword kw">end</span>
362:     <span class="ruby-keyword kw">end</span>
363: 
364:     <span class="ruby-comment cmt">#</span>
365:     <span class="ruby-comment cmt"># There's no README (shame! shame!).  Just use the first file</span>
366:     <span class="ruby-comment cmt"># that will be documented.</span>
367:     <span class="ruby-comment cmt">#</span>
368:     <span class="ruby-ivar">@files</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">file</span><span class="ruby-operator">|</span>
369:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">file</span>.<span class="ruby-identifier">document_self</span> <span class="ruby-keyword kw">then</span>
370:         <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">file</span>.<span class="ruby-identifier">path</span>
371:       <span class="ruby-keyword kw">end</span>
372:     <span class="ruby-keyword kw">end</span>
373: 
374:     <span class="ruby-comment cmt">#</span>
375:     <span class="ruby-comment cmt"># There are no files to be documented...  Something seems very wrong.</span>
376:     <span class="ruby-comment cmt">#</span>
377:     <span class="ruby-identifier">raise</span> <span class="ruby-constant">RDoc</span><span class="ruby-operator">::</span><span class="ruby-constant">Error</span>, <span class="ruby-value str">&quot;Couldn't find anything to document (perhaps :stopdoc: has been used in all classes)!&quot;</span>
378:   <span class="ruby-keyword kw">end</span></pre>
</body>
</html>
