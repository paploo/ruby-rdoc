<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>add_class_or_module (RDoc::TopLevel)</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <link rel="stylesheet" href="../../.././rdoc-style.css" type="text/css" media="screen" />
</head>
<body class="standalone-code">
  <pre>     <span class="ruby-comment cmt"># File lib/rdoc/code_objects.rb, line 618</span>
618:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">add_class_or_module</span>(<span class="ruby-identifier">collection</span>, <span class="ruby-identifier">class_type</span>, <span class="ruby-identifier">name</span>, <span class="ruby-identifier">superclass</span>)
619:       <span class="ruby-identifier">cls</span> = <span class="ruby-identifier">collection</span>[<span class="ruby-identifier">name</span>]
620: 
621:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">cls</span> <span class="ruby-keyword kw">then</span>
622:         <span class="ruby-identifier">cls</span>.<span class="ruby-identifier">superclass</span> = <span class="ruby-identifier">superclass</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">cls</span>.<span class="ruby-identifier">module?</span>
623:         <span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;Reusing class/module #{cls.full_name}&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">$DEBUG_RDOC</span>
624:       <span class="ruby-keyword kw">else</span>
625:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">class_type</span> <span class="ruby-operator">==</span> <span class="ruby-constant">NormalModule</span> <span class="ruby-keyword kw">then</span>
626:           <span class="ruby-identifier">all</span> = <span class="ruby-ivar">@@all_modules</span>
627:         <span class="ruby-keyword kw">else</span>
628:           <span class="ruby-identifier">all</span> = <span class="ruby-ivar">@@all_classes</span>
629:         <span class="ruby-keyword kw">end</span>
630: 
631:         <span class="ruby-identifier">cls</span> = <span class="ruby-identifier">all</span>[<span class="ruby-identifier">name</span>]
632: 
633:         <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">cls</span> <span class="ruby-keyword kw">then</span>
634:           <span class="ruby-identifier">cls</span> = <span class="ruby-identifier">class_type</span>.<span class="ruby-identifier">new</span> <span class="ruby-identifier">name</span>, <span class="ruby-identifier">superclass</span>
635:           <span class="ruby-identifier">all</span>[<span class="ruby-identifier">name</span>] = <span class="ruby-identifier">cls</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-ivar">@done_documenting</span>
636:         <span class="ruby-keyword kw">else</span>
637:           <span class="ruby-comment cmt"># If the class has been encountered already, check that its</span>
638:           <span class="ruby-comment cmt"># superclass has been set (it may not have been, depending on</span>
639:           <span class="ruby-comment cmt"># the context in which it was encountered).</span>
640:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">class_type</span> <span class="ruby-operator">==</span> <span class="ruby-constant">NormalClass</span>
641:             <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">cls</span>.<span class="ruby-identifier">superclass</span> <span class="ruby-keyword kw">then</span>
642:               <span class="ruby-identifier">cls</span>.<span class="ruby-identifier">superclass</span> = <span class="ruby-identifier">superclass</span>
643:             <span class="ruby-keyword kw">end</span>
644:           <span class="ruby-keyword kw">end</span>
645:         <span class="ruby-keyword kw">end</span>
646: 
647:         <span class="ruby-identifier">collection</span>[<span class="ruby-identifier">name</span>] = <span class="ruby-identifier">cls</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-ivar">@done_documenting</span>
648: 
649:         <span class="ruby-identifier">cls</span>.<span class="ruby-identifier">parent</span> = <span class="ruby-keyword kw">self</span>
650:       <span class="ruby-keyword kw">end</span>
651: 
652:       <span class="ruby-identifier">cls</span>
653:     <span class="ruby-keyword kw">end</span></pre>
</body>
</html>
