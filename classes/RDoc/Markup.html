<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Class: RDoc::Markup [RDoc Documentation]</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href="../.././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;

    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }

  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }<\/style>" )

  // ]]>
  </script>

</head>
<body>


    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td><strong>Class</strong></td>
          <td class="class-name-in-header">RDoc::Markup</td>
        </tr>
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>


                <a href="../../files/lib/rdoc/markup/fragments_rb.html">

                lib/rdoc/markup/fragments.rb

                </a>


        <br />


                <a href="../../files/lib/rdoc/markup/inline_rb.html">

                lib/rdoc/markup/inline.rb

                </a>


        <br />


                <a href="../../files/lib/rdoc/markup/lines_rb.html">

                lib/rdoc/markup/lines.rb

                </a>


        <br />


                <a href="../../files/lib/rdoc/markup/to_flow_rb.html">

                lib/rdoc/markup/to_flow.rb

                </a>


        <br />


                <a href="../../files/lib/rdoc/markup_rb.html">

                lib/rdoc/markup.rb

                </a>


        <br />

            </td>
        </tr>


        <tr class="top-aligned-row">
            <td><strong>Parent:</strong></td>
            <td>

                <a href="../Object.html">

                Object

               </a>

            </td>
        </tr>

        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">

  <div id="contextContent">

    <div id="description">
      <p>
<a href="Markup.html">RDoc::Markup</a> parses plain text documents and
attempts to decompose them into their constituent parts. Some of these
parts are high-level: paragraphs, chunks of verbatim text, list entries and
the like. Other parts happen at the character level: a piece of bold text,
a word in code font. This markup is similar in spirit to that used on
WikiWiki webs, where folks create web pages using a simple set of
formatting rules.
</p>
<p>
<a href="Markup.html">RDoc::Markup</a> itself does no output formatting:
this is left to a different set of classes.
</p>
<p>
<a href="Markup.html">RDoc::Markup</a> is extendable at runtime: you can
add new markup elements to be recognised in the documents that <a
href="Markup.html">RDoc::Markup</a> parses.
</p>
<p>
<a href="Markup.html">RDoc::Markup</a> is intended to be the basis for a
family of tools which share the common requirement that simple, plain-text
should be rendered in a variety of different output formats and media. It
is envisaged that <a href="Markup.html">RDoc::Markup</a> could be the basis
for formatting <a href="RDoc.html">RDoc</a> style comment blocks, Wiki
entries, and online FAQs.
</p>
<h2>Synopsis</h2>
<p>
This code converts <tt>input_string</tt> to HTML. The conversion takes
place in the <tt>convert</tt> method, so you can use the same <a
href="Markup.html">RDoc::Markup</a> converter to convert multiple input
strings.
</p>
<pre>
  require 'rdoc/markup/to_html'

  h = RDoc::Markup::ToHtml.new

  puts h.convert(input_string)
</pre>
<p>
You can extend the <a href="Markup.html">RDoc::Markup</a> parser to
recognise new markup sequences, and to add special processing for text that
matches a regular expression. Here we make WikiWords significant to the
parser, and also make the sequences {word} and <no>text...</no> signify
strike-through text. When then subclass the HTML output class to deal with
these:
</p>
<pre>
  require 'rdoc/markup'
  require 'rdoc/markup/to_html'

  class WikiHtml &lt; RDoc::Markup::ToHtml
    def handle_special_WIKIWORD(special)
      &quot;&lt;font color=red&gt;&quot; + special.text + &quot;&lt;/font&gt;&quot;
    end
  end

  m = RDoc::Markup.new
  m.add_word_pair(&quot;{&quot;, &quot;}&quot;, :STRIKE)
  m.add_html(&quot;no&quot;, :STRIKE)

  m.add_special(/\b([A-Z][a-z]+[A-Z]\w+)/, :WIKIWORD)

  wh = WikiHtml.new
  wh.add_tag(:STRIKE, &quot;&lt;strike&gt;&quot;, &quot;&lt;/strike&gt;&quot;)

  puts &quot;&lt;body&gt;#{wh.convert ARGF.read}&lt;/body&gt;&quot;
</pre>

    </div>

   </div>


    <div id="method-list">
      <h3 class="section-bar">Methods</h3>

      <div class="name-list">

        <a href="#M004500">add_html</a>&nbsp;&nbsp;

        <a href="#M004501">add_special</a>&nbsp;&nbsp;

        <a href="#M004499">add_word_pair</a>&nbsp;&nbsp;

        <a href="#M004503">assign_types_to_lines</a>&nbsp;&nbsp;

        <a href="#M004506">content</a>&nbsp;&nbsp;

        <a href="#M004502">convert</a>&nbsp;&nbsp;

        <a href="#M004507">get_line_types</a>&nbsp;&nbsp;

        <a href="#M004505">group_lines</a>&nbsp;&nbsp;

        <a href="#M004504">handled_labeled_list</a>&nbsp;&nbsp;

        <a href="#M004498">new</a>&nbsp;&nbsp;

      </div>
    </div>

  </div>

    <!-- if includes -->

    <div id="section">

    <div id="class-list">
      <h3 class="section-bar">Classes and Modules</h3>

      Module <a href="Markup/Flow.html" class="link">RDoc::Markup::Flow</a><br />
Class <a href="Markup/AttrChanger.html" class="link">RDoc::Markup::AttrChanger</a><br />
Class <a href="Markup/AttrSpan.html" class="link">RDoc::Markup::AttrSpan</a><br />
Class <a href="Markup/Attribute.html" class="link">RDoc::Markup::Attribute</a><br />
Class <a href="Markup/BlankLine.html" class="link">RDoc::Markup::BlankLine</a><br />
Class <a href="Markup/Fragment.html" class="link">RDoc::Markup::Fragment</a><br />
Class <a href="Markup/Heading.html" class="link">RDoc::Markup::Heading</a><br />
Class <a href="Markup/Line.html" class="link">RDoc::Markup::Line</a><br />
Class <a href="Markup/LineCollection.html" class="link">RDoc::Markup::LineCollection</a><br />
Class <a href="Markup/Lines.html" class="link">RDoc::Markup::Lines</a><br />
Class <a href="Markup/ListBase.html" class="link">RDoc::Markup::ListBase</a><br />
Class <a href="Markup/ListEnd.html" class="link">RDoc::Markup::ListEnd</a><br />
Class <a href="Markup/ListItem.html" class="link">RDoc::Markup::ListItem</a><br />
Class <a href="Markup/ListStart.html" class="link">RDoc::Markup::ListStart</a><br />
Class <a href="Markup/Paragraph.html" class="link">RDoc::Markup::Paragraph</a><br />
Class <a href="Markup/PreProcess.html" class="link">RDoc::Markup::PreProcess</a><br />
Class <a href="Markup/Rule.html" class="link">RDoc::Markup::Rule</a><br />
Class <a href="Markup/Special.html" class="link">RDoc::Markup::Special</a><br />
Class <a href="Markup/ToFlow.html" class="link">RDoc::Markup::ToFlow</a><br />
Class <a href="Markup/ToHtml.html" class="link">RDoc::Markup::ToHtml</a><br />
Class <a href="Markup/ToHtmlCrossref.html" class="link">RDoc::Markup::ToHtmlCrossref</a><br />
Class <a href="Markup/ToLaTeX.html" class="link">RDoc::Markup::ToLaTeX</a><br />
Class <a href="Markup/ToTest.html" class="link">RDoc::Markup::ToTest</a><br />
Class <a href="Markup/ToTexInfo.html" class="link">RDoc::Markup::ToTexInfo</a><br />
Class <a href="Markup/Verbatim.html" class="link">RDoc::Markup::Verbatim</a><br />

    </div>

    <div id="constants-list">
      <h3 class="section-bar">Constants</h3>

      <div class="name-list">
        <table summary="Constants">

        <tr class="top-aligned-row context-row">
          <td class="context-item-name">AttrChanger</td>
          <td>=</td>
          <td class="context-item-value">Struct.new(:turn_on, :turn_off)</td>

        </tr>

        <tr class="top-aligned-row context-row">
          <td class="context-item-name">SPACE</td>
          <td>=</td>
          <td class="context-item-value">?\s</td>

        </tr>

        <tr class="top-aligned-row context-row">
          <td class="context-item-name">SIMPLE_LIST_RE</td>
          <td>=</td>
          <td class="context-item-value">/^(                 (  \*          (?# bullet)                   |-           (?# bullet)                   |\d+\.       (?# numbered )                   |[A-Za-z]\.  (?# alphabetically numbered )                 )                 \s+               )\S/x</td>

          <td>&nbsp;</td>
          <td class="context-item-desc">
<a href="../List.html">List</a> entries look like:

<pre>
  *       text
  1.      text
  [label] text
  label:: text
</pre>
<p>
Flag it as a list entry, and work out the indent for subsequent lines
</p>
</td>

        </tr>

        <tr class="top-aligned-row context-row">
          <td class="context-item-name">LABEL_LIST_RE</td>
          <td>=</td>
          <td class="context-item-value">/^(                       (  \[.*?\]    (?# labeled  )                         |\S.*::     (?# note     )                       )(?:\s+|$)                     )/x</td>

        </tr>

        </table>
      </div>
    </div>




    <!-- if method_list -->

    <div id="methods">

      <h3 class="section-bar">Public Class methods</h3>


      <div id="method-M004498" class="method-detail">
        <a name="M004498"></a>

        <div class="method-heading">

          <a href="Markup.src/M004498.html" target="Code" class="method-signature"
            onclick="popupCode('Markup.src/M004498.html');return false;">

          <span class="method-name">new</span><span class="method-args">()</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Take a block of text and use various heuristics to determine it&#8217;s
structure (paragraphs, lists, and so on). Invoke an event handler as we
identify significant chunks.
</p>

        </div>
      </div>


      <h3 class="section-bar">Public Instance methods</h3>


      <div id="method-M004500" class="method-detail">
        <a name="M004500"></a>

        <div class="method-heading">

          <a href="Markup.src/M004500.html" target="Code" class="method-signature"
            onclick="popupCode('Markup.src/M004500.html');return false;">

          <span class="method-name">add_html</span><span class="method-args">(tag, name)</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Add to the sequences recognized as general markup.
</p>

        </div>
      </div>


      <div id="method-M004501" class="method-detail">
        <a name="M004501"></a>

        <div class="method-heading">

          <a href="Markup.src/M004501.html" target="Code" class="method-signature"
            onclick="popupCode('Markup.src/M004501.html');return false;">

          <span class="method-name">add_special</span><span class="method-args">(pattern, name)</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Add to other inline sequences. For example, we could add WikiWords using
something like:
</p>
<pre>
   parser.add_special(/\b([A-Z][a-z]+[A-Z]\w+)/, :WIKIWORD)
</pre>
<p>
Each wiki word will be presented to the output formatter via the
accept_special method.
</p>

        </div>
      </div>


      <div id="method-M004499" class="method-detail">
        <a name="M004499"></a>

        <div class="method-heading">

          <a href="Markup.src/M004499.html" target="Code" class="method-signature"
            onclick="popupCode('Markup.src/M004499.html');return false;">

          <span class="method-name">add_word_pair</span><span class="method-args">(start, stop, name)</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Add to the sequences used to add formatting to an individual word (such as
<b>bold</b>). Matching entries will generate attributes that the output
formatters can recognize by their <tt>name</tt>.
</p>

        </div>
      </div>


      <div id="method-M004506" class="method-detail">
        <a name="M004506"></a>

        <div class="method-heading">

          <a href="Markup.src/M004506.html" target="Code" class="method-signature"
            onclick="popupCode('Markup.src/M004506.html');return false;">

          <span class="method-name">content</span><span class="method-args">()</span>

          </a>

        </div>

        <div class="method-description">

          <p>
For debugging, we allow access to our line contents as text.
</p>

        </div>
      </div>


      <div id="method-M004502" class="method-detail">
        <a name="M004502"></a>

        <div class="method-heading">

          <a href="Markup.src/M004502.html" target="Code" class="method-signature"
            onclick="popupCode('Markup.src/M004502.html');return false;">

          <span class="method-name">convert</span><span class="method-args">(str, op)</span>

          </a>

        </div>

        <div class="method-description">

          <p>
We take a string, split it into lines, work out the type of each line, and
from there deduce groups of lines (for example all lines in a paragraph).
We then invoke the output formatter using a Visitor to display the result.
</p>

        </div>
      </div>


      <div id="method-M004507" class="method-detail">
        <a name="M004507"></a>

        <div class="method-heading">

          <a href="Markup.src/M004507.html" target="Code" class="method-signature"
            onclick="popupCode('Markup.src/M004507.html');return false;">

          <span class="method-name">get_line_types</span><span class="method-args">()</span>

          </a>

        </div>

        <div class="method-description">

          <p>
For debugging, return the list of line types.
</p>

        </div>
      </div>


      <h3 class="section-bar">Private Instance methods</h3>


      <div id="method-M004503" class="method-detail">
        <a name="M004503"></a>

        <div class="method-heading">

          <a href="Markup.src/M004503.html" target="Code" class="method-signature"
            onclick="popupCode('Markup.src/M004503.html');return false;">

          <span class="method-name">assign_types_to_lines</span><span class="method-args">(margin = 0, level = 0)</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Look through the text at line indentation. We flag each line as being
Blank, a paragraph, a list element, or verbatim text.
</p>

        </div>
      </div>


      <div id="method-M004505" class="method-detail">
        <a name="M004505"></a>

        <div class="method-heading">

          <a href="Markup.src/M004505.html" target="Code" class="method-signature"
            onclick="popupCode('Markup.src/M004505.html');return false;">

          <span class="method-name">group_lines</span><span class="method-args">()</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Return a block consisting of fragments which are paragraphs, list entries
or verbatim text. We merge consecutive lines of the same type and level
together. We are also slightly tricky with lists: the lines following a
list introduction look like paragraph lines at the next level, and we remap
them into list entries instead.
</p>

        </div>
      </div>


      <div id="method-M004504" class="method-detail">
        <a name="M004504"></a>

        <div class="method-heading">

          <a href="Markup.src/M004504.html" target="Code" class="method-signature"
            onclick="popupCode('Markup.src/M004504.html');return false;">

          <span class="method-name">handled_labeled_list</span><span class="method-args">(line, level, margin, offset, prefix)</span>

          </a>

        </div>

        <div class="method-description">

          <p>
Handle labeled list entries, We have a special case to deal with. Because
the labels can be long, they force the remaining block of text over the to
right:
</p>
<pre>
  this is a long label that I wrote:: and here is the
                                      block of text with
                                      a silly margin
</pre>
<p>
So we allow the special case. If the label is followed by nothing, and if
the following line is indented, then we take the indent of that line as the
new margin.
</p>
<pre>
  this is a long label that I wrote::
      here is a more reasonably indented block which
      will be attached to the label.
</pre>

        </div>
      </div>



    </div>




  </div>

<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>
