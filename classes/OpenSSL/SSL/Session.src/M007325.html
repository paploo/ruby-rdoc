<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>to_pem (OpenSSL::SSL::Session)</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <link rel="stylesheet" href="../../../.././rdoc-style.css" type="text/css" media="screen" />
</head>
<body class="standalone-code">
  <pre>/*
 * call-seq:
 *    session.to_pem -&gt; String
 *
 * Returns a PEM encoded String that contains the Session object.
*/
static VALUE ossl_ssl_session_to_pem(VALUE self)
{
        SSL_SESSION *ctx;
        BIO *out;
        BUF_MEM *buf;
        VALUE str;
        int i;
         
        GetSSLSession(self, ctx);

        if (!(out = BIO_new(BIO_s_mem()))) {
                ossl_raise(eSSLSession, &quot;BIO_s_mem()&quot;);
        }

        if (!(i=PEM_write_bio_SSL_SESSION(out, ctx))) {
                BIO_free(out);
                ossl_raise(eSSLSession, &quot;SSL_SESSION_print()&quot;);
        }

        BIO_get_mem_ptr(out, &amp;buf);
        str = rb_str_new(buf-&gt;data, buf-&gt;length);
        BIO_free(out);

        return str;
}</pre>
</body>
</html>
