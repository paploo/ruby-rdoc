<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>value= (OpenSSL::X509::Attribute)</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <link rel="stylesheet" href="../../../.././rdoc-style.css" type="text/css" media="screen" />
</head>
<body class="standalone-code">
  <pre>/*
 * call-seq:
 *    attr.value = asn1 =&gt; asn1
 */
static VALUE
ossl_x509attr_set_value(VALUE self, VALUE value)
{
    X509_ATTRIBUTE *attr;
    ASN1_TYPE *a1type;

    if(!(a1type = ossl_asn1_get_asn1type(value)))
        ossl_raise(eASN1Error, &quot;could not get ASN1_TYPE&quot;);
    if(ASN1_TYPE_get(a1type) == V_ASN1_SEQUENCE){
        ASN1_TYPE_free(a1type);
        ossl_raise(eASN1Error, &quot;couldn't set SEQUENCE for attribute value.&quot;);
    }
    GetX509Attr(self, attr);
    if(attr-&gt;value.set){
        if(OSSL_X509ATTR_IS_SINGLE(attr)) ASN1_TYPE_free(attr-&gt;value.single);
        else sk_ASN1_TYPE_free(attr-&gt;value.set);
    }
    OSSL_X509ATTR_SET_SINGLE(attr);
    attr-&gt;value.single = a1type;

    return value;
}</pre>
</body>
</html>
