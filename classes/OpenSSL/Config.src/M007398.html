<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>[] (OpenSSL::Config)</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <link rel="stylesheet" href="../../.././rdoc-style.css" type="text/css" media="screen" />
</head>
<body class="standalone-code">
  <pre>/*
 * Get all numbers as strings - use str.to_i to convert
 * long number = CONF_get_number(confp-&gt;config, sect, StringValuePtr(item));
 */
static VALUE
ossl_config_get_section(VALUE self, VALUE section)
{
    CONF *conf;
    STACK_OF(CONF_VALUE) *sk;
    CONF_VALUE *entry;
    int i, entries;
    VALUE hash;

    hash = rb_hash_new();
    StringValue(section);
    GetConfig(self, conf);
    if (!(sk = NCONF_get_section(conf, StringValuePtr(section)))) {
        ERR_clear_error();
        return hash;
    }
    if ((entries = sk_CONF_VALUE_num(sk)) &lt; 0) {
        OSSL_Debug(&quot;# of items in section is &lt; 0?!?&quot;);
        return hash;
    }
    for (i=0; i&lt;entries; i++) {
        entry = sk_CONF_VALUE_value(sk, i);            
        rb_hash_aset(hash, rb_str_new2(entry-&gt;name), rb_str_new2(entry-&gt;value));
    }

    return hash;
}</pre>
</body>
</html>
