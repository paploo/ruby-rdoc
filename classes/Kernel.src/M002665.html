<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>iterator? (Kernel)</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <link rel="stylesheet" href="../.././rdoc-style.css" type="text/css" media="screen" />
</head>
<body class="standalone-code">
  <pre>/*
 *  call-seq:
 *     block_given?   =&gt; true or false
 *     iterator?      =&gt; true or false
 *
 *  Returns &lt;code&gt;true&lt;/code&gt; if &lt;code&gt;yield&lt;/code&gt; would execute a
 *  block in the current context. The &lt;code&gt;iterator?&lt;/code&gt; form
 *  is mildly deprecated.
 *
 *     def try
 *       if block_given?
 *         yield
 *       else
 *         &quot;no block&quot;
 *       end
 *     end
 *     try                  #=&gt; &quot;no block&quot;
 *     try { &quot;hello&quot; }      #=&gt; &quot;hello&quot;
 *     try do &quot;hello&quot; end   #=&gt; &quot;hello&quot;
 */


VALUE
rb_f_block_given_p(void)
{
    rb_thread_t *th = GET_THREAD();
    rb_control_frame_t *cfp = th-&gt;cfp;
    cfp = vm_get_ruby_level_caller_cfp(th, RUBY_VM_PREVIOUS_CONTROL_FRAME(cfp));

    if (cfp != 0 &amp;&amp;
        (cfp-&gt;lfp[0] &amp; 0x02) == 0 &amp;&amp;
        GC_GUARDED_PTR_REF(cfp-&gt;lfp[0])) {
        return Qtrue;
    }
    else {
        return Qfalse;
    }
}</pre>
</body>
</html>
