<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>exec (Kernel)</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <link rel="stylesheet" href="../.././rdoc-style.css" type="text/css" media="screen" />
</head>
<body class="standalone-code">
  <pre>/*
 *  call-seq:
 *     exec([env,] command [, arg, ...] [,options])
 *
 *  Replaces the current process by running the given external _command_.
 *  If optional arguments, sequence of +arg+, are not given, that argument is
 *  taken as a line that is subject to shell expansion before being
 *  executed. If one or more +arg+ given, they
 *  are passed as parameters to _command_ with no shell
 *  expansion. If +command+ is a two-element array, the first
 *  element is the command to be executed, and the second argument is
 *  used as the &lt;code&gt;argv[0]&lt;/code&gt; value, which may show up in process
 *  listings. In order to execute the command, one of the &lt;code&gt;exec(2)&lt;/code&gt; 
 *  system calls is used, so the running command may inherit some of the environment 
 *  of the original program (including open file descriptors).
 *
 *  The hash arguments, env and options, are same as
 *  &lt;code&gt;system&lt;/code&gt; and &lt;code&gt;spawn&lt;/code&gt;.
 *  See &lt;code&gt;spawn&lt;/code&gt; for details.
 *
 *  Raises SystemCallError if the _command_ couldn't execute (typically
 *  &lt;code&gt;Errno::ENOENT&lt;/code&gt; when it was not found).
 *
 *     exec &quot;echo *&quot;       # echoes list of files in current directory
 *     # never get here
 *
 *
 *     exec &quot;echo&quot;, &quot;*&quot;    # echoes an asterisk
 *     # never get here
 */

VALUE
rb_f_exec(int argc, VALUE *argv)
{
    struct rb_exec_arg earg;

    rb_exec_arg_init(argc, argv, Qtrue, &amp;earg);
    if (NIL_P(rb_ary_entry(earg.options, EXEC_OPTION_CLOSE_OTHERS)))
        rb_exec_arg_addopt(&amp;earg, ID2SYM(rb_intern(&quot;close_others&quot;)), Qfalse);
    rb_exec_arg_fixup(&amp;earg);

    rb_exec(&amp;earg);
    rb_sys_fail(earg.prog);
    return Qnil;                /* dummy */
}</pre>
</body>
</html>
