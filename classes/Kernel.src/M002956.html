<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>callcc (Kernel)</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <link rel="stylesheet" href="../.././rdoc-style.css" type="text/css" media="screen" />
</head>
<body class="standalone-code">
  <pre>/*
 *  call-seq:
 *     callcc {|cont| block }   =&gt;  obj
 *  
 *  Generates a &lt;code&gt;Continuation&lt;/code&gt; object, which it passes to the
 *  associated block. Performing a &lt;em&gt;cont&lt;/em&gt;&lt;code&gt;.call&lt;/code&gt; will
 *  cause the &lt;code&gt;callcc&lt;/code&gt; to return (as will falling through the
 *  end of the block). The value returned by the &lt;code&gt;callcc&lt;/code&gt; is
 *  the value of the block, or the value passed to
 *  &lt;em&gt;cont&lt;/em&gt;&lt;code&gt;.call&lt;/code&gt;. See class &lt;code&gt;Continuation&lt;/code&gt;
 *  for more details. Also see &lt;code&gt;Kernel::throw&lt;/code&gt; for
 *  an alternative mechanism for unwinding a call stack.
 */

static VALUE
rb_callcc(VALUE self)
{
    volatile int called;
    volatile VALUE val = cont_capture(&amp;called);

    if (called) {
        return val;
    }
    else {
        return rb_yield(val);
    }
}</pre>
</body>
</html>
