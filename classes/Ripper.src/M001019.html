<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>new (Ripper)</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <link rel="stylesheet" href="../.././rdoc-style.css" type="text/css" media="screen" />
</head>
<body class="standalone-code">
  <pre>/*
 *  call-seq:
 *    Ripper.new(src, filename=&quot;(ripper)&quot;, lineno=1) -&gt; ripper
 *
 *  Create a new Ripper object.
 *  _src_ must be a String, an IO, or an Object which has #gets method.
 *
 *  This method does not starts parsing.
 *  See also Ripper#parse and Ripper.parse.
 */
static VALUE
ripper_initialize(int argc, VALUE *argv, VALUE self)
{
    struct parser_params *parser;
    VALUE src, fname, lineno;

    Data_Get_Struct(self, struct parser_params, parser);
    rb_scan_args(argc, argv, &quot;12&quot;, &amp;src, &amp;fname, &amp;lineno);
    if (rb_obj_respond_to(src, ripper_id_gets, 0)) {
        parser-&gt;parser_lex_gets = ripper_lex_get_generic;
    }
    else {
        StringValue(src);
        parser-&gt;parser_lex_gets = lex_get_str;
    }
    parser-&gt;parser_lex_input = src;
    parser-&gt;eofp = Qfalse;
    if (NIL_P(fname)) {
        fname = STR_NEW2(&quot;(ripper)&quot;);
    }
    else {
        StringValue(fname);
    }
    parser_initialize(parser);

    parser-&gt;parser_ruby_sourcefile_string = fname;
    parser-&gt;parser_ruby_sourcefile = RSTRING_PTR(fname);
    parser-&gt;parser_ruby_sourceline = NIL_P(lineno) ? 0 : NUM2INT(lineno) - 1;

    return Qnil;
}</pre>
</body>
</html>
